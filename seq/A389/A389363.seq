%I A389363 #24 Oct 14 2025 03:04:35
%S A389363 0,3,18,57,138,282,516,870,1380,2085,3030,4263,5838,7812,10248,13212,
%T A389363 16776,21015,26010,31845,38610,46398,55308,65442,76908,89817,104286,
%U A389363 120435,138390,158280,180240,204408,230928,259947,291618,326097,363546,404130
%N A389363 a(n) is the number of isosceles trapezoids in a triangular grid of side length n.
%C A389363 a(n) = number of all isosceles trapezoids in a triangular grid of side length n (or in a matchstick arrangement with enclosing triangle of length n), for n = 1, 2, 3, ...
%C A389363 Let b(n) = the number of all isosceles trapezoids with horizontal bases in a triangular grid of side length n, for n = 1, 2, 3, ... This is equal to the sum of trapezoids with a (horizontal) smaller base placed:
%C A389363      1) above the larger one. Their number is defined by the recurrence u(1) = 0, and u(n) = u(n-1) + binomial(n + 1, 3), for n > 1, which equals to the partial sums of the tetrahedral numbers (A000292). Its solution is u(n) = binomial(n + 2, 4), for n = 1, 2, 3, ..., which is A000332 (n + 2) = 0, 1, 5, 15, 35, 70, 126, 210, ...
%C A389363      2) below the larger one. Their number is defined by the recurrence d(n) = d(n - 1) + binomial(n - 1, 2) + binomial(n - 3, 2) + ... + binomial(n - 2*floor((n-1)/2) + 1, 2). The terms of this sequence are: d(1) = 0, d(2)= 0, and d(n)= A001752(n-3), for n > 2, which is 0, 0, 1, 4, 11, 24, 46, 80, 130, 200, ... The closed formula is d(n) = floor ((n^2 - 1)(n^2 - 3)/48).
%C A389363 Therefore b(n) = u(n) + d(n), where b(1) = 0 = A000332(3) + 0, b(2)= 1 = A000332 (4) + 0, and b(n) = A000332 (n+2) + A001752(n-3), for n > 2. Then b(n) = 0, 1, 6, 19, 46, 94, 172, 290, ..., for n = 1, 2, 3, ... So b(1) = 0, and b(n) = A070893(n - 1), for n > 1.
%C A389363 Therefore a(n) = 3*b(n) counts all isosceles trapezoids in a triangular grid of side length n, since for each of the three directions there are b(n) trapezoids with bases parallel to one of the three sides of the enclosing equilateral triangle.
%H A389363 Valentin Bakoev, <a href="/A389363/b389363.txt">Table of n, a(n) for n = 1..200</a>
%H A389363 <a href="/index/Rec#order_06">Index entries for linear recurrences with constant coefficients</a>, signature (4,-5,0,5,-4,1).
%F A389363 a(n) = 3*(binomial(n + 2, 4) + floor((n^2 - 1)*(n^2 - 3)/48)) = floor((n^2 - 1)*(3*n^2 + 4*n - 3)/16).
%F A389363 a(1) = 0, and a(n) = 3*A070893(n - 1), for n > 1.
%F A389363 G.f.: 3*x^2*(1 + 2*x)/((1 - x)^5*(1 + x)). - _Stefano Spezia_, Oct 09 2025
%e A389363 The triangular grid of side length n=4 looks like this:
%e A389363         /\
%e A389363        /__\
%e A389363       /\  /\
%e A389363      /__\/__\
%e A389363     /\  /\  /\
%e A389363    /__\/__\/__\
%e A389363   /\  /\  /\  /\
%e A389363  /__\/__\/__\/__\
%e A389363 The number of isosceles trapezoids with horizontal bases, with the smaller base placed:
%e A389363      1) above the larger one, is: 6 + 3 + 1 = 10 trapezoids with height h; 3 + 1 = 4 trapezoids with height 2*h; 1 trapezoid with height 3*h. In total u(4) = 10 + 4 + 1 = 15 = A000332(n + 2) = A000332(6) trapezoids of this type;
%e A389363      2) below the larger one is: d(4) = 3 + 1 = 4 = A001752(n - 2) = A001752(2) trapezoids with height h and there are no trapezoids with a higher height.
%e A389363 So all trapezoids with horizontal bases are b(4) = u(4) + d(4) = 15 + 4 = 19 = A070893(n-1) = A070893(3). Hence the number of all trapezoids in this grid is a(4) = 3*b(4) = 3*19 = 57 = 3*A070893(3).
%t A389363 Table[Floor[((n^2 - 1) (3 n^2 + 4 n - 3))/16], {n, 1, 100}]
%Y A389363 Cf. A000332, A001752, A070893.
%K A389363 nonn,easy
%O A389363 1,2
%A A389363 _Valentin Bakoev_, Oct 01 2025
