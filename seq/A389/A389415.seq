%I A389415 #27 Oct 08 2025 00:28:31
%S A389415 1,1,4,10,56,304,1956,14856,130008,1237440,13084540,151656128,
%T A389415 1907139360,25850635872,377651957184,5861540577920,97217787650368,
%U A389415 1706293248844992
%N A389415 a(n) is the number of permutations of 1..n that win this game. Take a shuffled pack of cards labeled 1..n, repeat this: look at the top card's value, X. Move X cards from the top of the deck to the back, one at a time. If you ever end up with the first card back at the top, you win.
%e A389415 For a(3), the permutation 1 2 3 counts as a win. This is what happens:
%e A389415   1 2 3
%e A389415   2 3 1 (1 card to the back)
%e A389415   1 2 3 (2 cards to the back)
%e A389415   Win!
%e A389415 For a(3), the permutation 1 3 2 is not counted:
%e A389415   1 3 2
%e A389415   3 2 1 (1 card to the back)
%e A389415   3 2 1 (3 cards to the back)
%e A389415   Infinite loop: lose!
%e A389415 For a(4), the permutation 2 1 3 4 is not counted:
%e A389415   2 1 3 4
%e A389415   3 4 2 1
%e A389415   1 3 4 2
%e A389415   3 4 2 1
%e A389415   Infinite loop: lose!
%o A389415 (Python)
%o A389415 from itertools import permutations
%o A389415 def a(n):
%o A389415     seq = list(range(1,n+1))
%o A389415     t = 0
%o A389415     for p in permutations(seq):
%o A389415         i = 0
%o A389415         for step in range(n):
%o A389415             i += p[i]
%o A389415             if i == n:
%o A389415                 t += 1
%o A389415                 break
%o A389415             i = i % n
%o A389415     return t
%K A389415 nonn,more,new
%O A389415 1,3
%A A389415 _Christian Perfect_, Oct 03 2025
%E A389415 a(12)-a(14) from _Michael S. Branicky_, Oct 07 2025
%E A389415 a(15)-a(18) from _Jason Yuen_, Oct 07 2025
