%I A387909 #31 Oct 16 2025 20:51:36
%S A387909 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,
%T A387909 30,31,36,37,26,27,32,33,38,39,28,29,34,35,40,41,42,43,44,45,46,47,48,
%U A387909 49,54,55,60,61,50,51,56,57,62,63,52,53,58,59,64,65,66,67
%N A387909 Consider the factorial base expansion of n, without leading zeros, say (d(1), ..., d(w)); for k = 2..floor(w/2), if d(k) <= k then exchange d(k) and d(w+1-k); the resulting digits correspond to the factorial base expansion of a(n).
%C A387909 A self-inverse permutation of the nonnegative integers that preserves the number of digits (A084558) and the sum of digits (A034968) in factorial base.
%H A387909 Rémy Sigrist, <a href="/A387909/b387909.txt">Table of n, a(n) for n = 0..5040</a>
%H A387909 <a href="/index/Fa#facbase">Index entries for sequences related to factorial base representation</a>
%H A387909 <a href="/index/Per#IntegerPermutation">Index entries for sequences that are permutations of the natural numbers</a>
%F A387909 a(a(n)) = n.
%e A387909 For n = 1361: the factorial base expansion of 1361 is (d(1), ..., d(6)) = (1,5,1,2,2,1); d(2) = 5 > 2 so we don't alter d(2) and d(5); d(3) = 1 <= 3 so we exchange d(3) and d(4); the resulting digits, (1,5,2,1,2,1), correspond to 1379, so a(1361) = 1379.
%o A387909 (PARI) factdigits(n) = { my (dd=[]); for (r=2, oo, if (n==0, return (dd), dd=concat(n%r, dd); n\=r;);); }
%o A387909 fromfactdigits(d) = { sum (k=1, #d, d[#d+1-k]*k!); }
%o A387909 a(n) = {
%o A387909 	my (d = factdigits(n));
%o A387909 	for (k = 2, #d\2, if (d[k] <= k, [d[k], d[#d+1-k]] = [d[#d+1-k], d[k]];););
%o A387909 	fromfactdigits(d);
%o A387909 }
%Y A387909 Cf. A034968, A084558, A333658, A389644.
%K A387909 nonn,base,new
%O A387909 0,3
%A A387909 _Rémy Sigrist_, Oct 12 2025
